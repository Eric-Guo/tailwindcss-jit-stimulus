<%# 材料名称 %>
<div class="bg-white text-black-6c text-xs m-1 px-1.5 py-2.5">
  <div class="my-1 flex">
    <img class="w-40 h-40 object-cover" src="<%= get_first_url(material.cover) -%>" alt="">
    <dl class="block mx-3 my-1.5">
      <h3 class="text-lg my-4 font-medium"><%= material.name %>（<%= material.no %>）</h3>
      <p>
        <span>色系：</span>
        <span class="font-medium"><%= material.material_product&.color_systems&.pluck(:description)&.join(',') %></span>
      </p>
      <p>
        <span>产地：</span>
        <span class="font-medium"><%= material.material_product&.origin %></span>
      </p>

      <p>
        <span>价格区间：</span>
        <span class="font-medium"><%= "#{material.material_product&.low_price}-#{material.material_product&.high_price}/㎡" %></span>
      </p>

      <p>
        <span>是否常用产品：</span>
        <span class="font-medium"><%= material.material_product&.is_common == 1 ? '是' : '否' %></span>
      </p>
    </dl>
  </div>
  <h5 class="text-base mt-4">表面效果：</h5>
  <div class="pt-2 pb-3 overscroll-x-auto overflow-auto shadow-sm w-full flex flex-nowrap scrollbar-none">
    <% material.material_product&.surface_effects&.each do |surface_effect| %>
      <div class="flex-none relative">
        <img class="mx-px first:mx-px w-16 h-16 object-cover" src="<%= mat_img_url(surface_effect.path, "static/new_mat_g#{1}.jpg") -%>" alt="">
        <p class="absolute left-1/2 bottom-0 text-white text-center text-sm font-medium whitespace-nowrap" style="transform: translate(-50%, 0);">
          <%= surface_effect.description -%>
        </p>
      </div>
    <% end %>
  </div>
</div>
<div class="bg-white text-black-6c text-xs m-1 px-1.5 py-2">
  <h5 class="text-base font-medium my-2">安装施工要点</h5>
  <p class="my-2"><%= material.material_product&.points %></p>
  <h5 class="text-base font-medium my-2 mt-4">可定制效果</h5>
  <p class="my-2"><%= material.material_product&.is_customized %></p>
</div>

<%# 实际应用 %>
<div class="bg-white text-black-6c text-xs m-1 px-1.5 py-2">
  <h5 class="text-base font-medium my-2">实际应用</h5>
  <div
    class="my-2"
    data-controller="material-carousel"
    data-material-carousel-enter-class-value="<%= ['-animation-transition-x-full-reverse', 'animation-transition-x-full-reverse'].to_json %>"
    data-material-carousel-leave-class-value="<%= ['animation-transition-x-full', '-animation-transition-x-full'].to_json %>"
    data-material-carousel-duration-value="0.5"
    data-material-carousel-dot-active-class-value="bg-gray-900"
    data-material-carousel-auto-play-value="true"
    data-material-carousel-auto-play-time-value="2"
  >
    <div class="relative w-full h-52 overflow-hidden">
      <% material.material_product&.practical_applications&.each_with_index do |practical_application, i| %>
        <div class="absolute top-0 left-0 w-full h-full" style="display: <%= i == 0 ? '' : 'none;' %>" data-material-carousel-target="carouselItem">
          <img class="w-full h-full object-cover" src="<%= mat_img_url(practical_application.path, "") -%>" alt="">
        </div>
      <% end %>
    </div>
    <div class="flex justify-center mt-3">
      <% material.material_product&.practical_applications&.each_with_index do |practical_application, i| %>
        <div class="w-2 h-2 mx-1 rounded-full bg-gray-300 <%= i == 0 ? 'bg-gray-900' : '' %>" data-material-carousel-target="dotItem"></div>
      <% end %>
    </div>
  </div>
</div>

<%# 材料样品 %>
<div class="bg-white mx-1 px-1.5 pb-5 mt-1">
  <div class="text-black-6c text-xs py-2">
    <h5 class="inline text-base font-medium my-1">材料样品</h5>
    <a class="more-btn-sm inline" href="<%= root_path -%>">MORE+</a>
  </div>
  <div class="bg-gray-200">
    <div class="w-full overflow-auto h-40">
      <table class="w-full divide-y divide-gray-300 box-border">
        <thead>
          <tr>
            <th scope="col" class="px-1 py-2 border border-gray-300 border-solid whitespace-nowrap text-center text-sm text-gray-900">
              样品编号
            </th>
            <th scope="col" class="px-1 py-2 border border-gray-300 border-solid whitespace-nowrap text-center text-sm text-gray-900">
              色系
            </th>
            <th scope="col" class="px-1 py-2 border border-gray-300 border-solid whitespace-nowrap text-center text-sm text-gray-900">
              样品规格、型号
            </th>
            <th scope="col" class="px-1 py-2 border border-gray-300 border-solid whitespace-nowrap text-center text-sm text-gray-900">
              表面工艺
            </th>
            <th scope="col" class="px-1 py-2 border border-gray-300 border-solid whitespace-nowrap text-center text-sm text-gray-900">
              剩余库存
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-300">
          <% material.samples.each do |sample| %>
            <tr>
              <td class="px-1 py-2 text-center border border-gray-300 whitespace-nowrap text-xs font-medium">
                <%= sample.no -%>
              </td>
              <td class="px-1 py-2 text-center border border-gray-300 whitespace-nowrap text-xs">
                <%= sample&.color_systems&.pluck(:description)&.join(',') %>
              </td>
              <td class="px-1 py-2 text-center border border-gray-300 whitespace-nowrap text-xs">
                <%= sample.spec_model -%>
              </td>
              <td class="px-1 py-2 text-center border border-gray-300 whitespace-nowrap text-xs">
                <%= sample&.surface_effects&.pluck(:description)&.join(',') %>
              </td>
              <td class="px-1 py-2 text-center border border-gray-300 whitespace-nowrap text-xs">

              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="p-2 text-sm">实体材料库地址：上海市徐汇区漕河泾科汇大厦11F</div>
  </div>
</div>

<%# 产品案例 %>
<div class="bg-white text-black-6c text-xs px-1.5 py-2 mt-1 mx-1">
  <h5 class="inline text-base font-medium m-1">产品案例</h5>
  <a class="more-btn-sm inline" href="<%= root_path -%>">MORE+</a>
  <div class="mt-1 grid grid-cols-2 gap-y-2 gap-x-1 pb-2">
    <% material.cases.each do |project_case| %>
      <div>
        <div class="relative w-full h-28">
          <img class="w-full h-full object-cover" src="<%= get_first_url(project_case.live_photos) %>" alt="">
          <div class="absolute bottom-0 left-0 w-full flex justify-between items-center h-6 px-2 text-white text-xs black-mask">
            <div class="truncate"><%= material.name %></div>
            <div class="flex-none ml-3"><%= project_case.is_th == 1 ? '内部项目' : '外部项目' %></div>
          </div>
        </div>
        <div class="text-black-6c mt-1">
          <div class="text-sm truncate"><%= project_case.project_name -%>/<%= project_case.project_location -%></div>
          <div class="text-xs truncate"></div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<%# 构造做法 %>
<div class="bg-white text-black-6c m-1 px-1.5 py-2">
  <h5 class="inline text-base font-medium my-2">构造做法</h5>
  <a class="more-btn-sm inline" href="<%= root_path -%>">MORE+</a>

  <% if material.material_product&.practice_details.present? %>
    <% JSON.parse(material.material_product.practice_details)&.each_with_index do |practice_detail, i| %>
      <div class="my-2">
        <img class="w-full" src="<%= mat_img_url(practice_detail["url"], "") -%>" alt="">
      </div>
      <p class="text-base"><%= practice_detail["name"] -%></p>
    <% end %>
  <% end %>

</div>

<%# 厂家信息 %>
<div class="bg-white text-black-6c m-1 px-1.5 py-2">
  <h5 class="inline text-base font-medium my-2">厂家信息</h5>
  <a class="more-btn-sm inline" href="<%= root_path -%>">MORE+</a>

  <% material.manufacturers&.each do |manufacturer| %>
    <div class="flex bg-gray-200 border border-gray-200 border-solid px-2 my-3">
      <div class="flex justify-center items-center px-1">
        <img class="w-full border border-gray-300 border-solid" src="<%= mat_img_url(manufacturer.logo,'') -%>" alt="">
      </div>
      <div class="p-4">
        <h5 class="text-lg font-medium my-2"><%= manufacturer.name %></h5>
        <p class="text-sm text-gray-700">所在地：<%= manufacturer.location %></p>
        <p class="text-sm text-gray-700">联系方式：<%= manufacturer.contact_information %></p>
        <p class="text-sm text-gray-700">是否愿意提供材料样品：<%= manufacturer.is_allow == 1?'是':'否' %></p>
      </div>
    </div>
  <% end %>
</div>
