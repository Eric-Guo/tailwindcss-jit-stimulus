<%= turbo_frame_tag :manufacturer_feedback_modal do %>
  <div
    data-controller="modal turbo-modal"
    data-modal-allow-background-close="false"
    data-modal-disable-backdrop="true"
    data-turbo-modal-auto-show-value="true"
  >
    <div data-modal-target="container" class="animated fadeIn fixed inset-0 overflow-y-auto flex items-center justify-center hidden" style="z-index: 9999; background: rgba(0, 0, 0, .4);">
      <!-- Modal Inner Container -->
      <div
        class="overflow-hidden bg-white text-left rounded-2.5 select-none"
        style="width: 780px;"
      >
        <div class="relative h-10 flex justify-center items-center bg-black text-lg text-white">
          <span>供应商信息反馈</span>
          <button class="absolute right-5 top-3.5 w-3 h-3 text-white" data-action="click->turbo-modal#hide">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"/>
              <path fill-rule="evenodd" d="M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"/>
            </svg>
          </button>
        </div>
        <div class="p-5">
          <%= form_tag feedback_manufacturer_path, method: :post, id: 'feedbackManufacturerForm', data: {
            action: 'turbo:submit-end->turbo-modal#hide'
          } do %>
            <div>
              <div><span class="text-red">*</span> 问题类型</div>
              <div class="mt-4 grid grid-cols-4 gap-2.5">
                <% @question_types.each do |item| %>
                  <div class="flex items-start">
                    <input id="<%= "question_type#{item[:id]}" -%>" name="question_type[]" value="<%= item[:id] -%>" type="checkbox" class="mt-1 focus:ring-gray-50 text-gray-600 border-gray-300">
                    <label for="<%= "question_type#{item[:id]}" -%>" class="text-gray-700 ml-2 mt-px"><%= item[:title] -%></label>
                  </div>
                <% end %>
              </div>
            </div>
            <div class="mt-8">
              <div><span class="text-red">*</span> 意见反馈</div>
              <div class="mt-4 w-full h-28">
                <textarea
                  name="description"
                  placeholder="请输入你的意见反馈"
                  class="w-full h-full border border-neutral-200 rounded focus:border-black focus:ring-black resize-none text-sm placeholder:text-neutral-300 transition-all duration-300"
                ></textarea>
              </div>
            </div>
            <div class="mt-8">
              <div>问题截图</div>
              <div class="mt-4 w-full h-28 relative">
                <img
                  class="w-full h-full object-cover object-top"
                  src=""
                  alt=""
                  data-manufacturer-feedback-target="screenshotCover"
                >
                <div
                  class="absolute top-0 left-0 w-full h-full bg-black bg-opacity-60 flex flex-col justify-center items-center cursor-pointer hidden"
                  data-manufacturer-feedback-target="screenshotSuccess"
                  data-action="click->manfacturer-feedback#showEditor"
                >
                  <img class="w-8 h-8 object-cover" src="<%= image_pack_path('edit-pop.png') %>" alt="">
                  <span class="text-white mt-2">内容标记成功</span>
                </div>
                <div
                  class="absolute top-0 left-0 w-full h-full bg-gray-400 flex flex-col justify-center items-center"
                  data-manufacturer-feedback-target="screenshotLoading"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 animate-spin text-white" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                  </svg>
                  <span class="text-white mt-2">正在处理页面截图</span>
                </div>
              </div>
            </div>
            <div class="mt-8">
              <div>相关参考</div>
              <div class="mt-4 w-full h-28 border border-neutral-200 rounded text-sm">
                <div class="w-full h-full flex p-2 text-neutral-300">
                  支持多种上传文件格式：JPG,PNG,PPT,PDF,RAR等（可上传多个）
                </div>
                <div class="w-full h-full p-2.5 overflow-auto hidden">
                </div>
              </div>
            </div>
          <% end %>
        </div>
        <div class="flex justify-center gap-5 p-5 border-t text-neutral-140 border-neutral-235">
          <button class="w-20 py-1 rounded-lg border text-gray-400 hover:bg-black hover:text-white" type="submit" form="feedbackManufacturerForm">提交反馈</button>
          <button class="w-20 py-1 rounded-lg border ml-4 text-gray-400 hover:bg-gray-300 hover:text-gray-500" type="button" data-action="click->turbo-modal#hide">取消</button>
        </div>
      </div>
    </div>
  </div>
<% end %>
